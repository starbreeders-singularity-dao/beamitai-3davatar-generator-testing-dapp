{"ast":null,"code":"import _extends from '@babel/runtime/helpers/esm/extends';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport * as React from 'react';\nimport { FlyControls as FlyControls$1 } from 'three-stdlib';\nconst FlyControls = /* @__PURE__ */React.forwardRef(({\n  domElement,\n  ...props\n}, fref) => {\n  const {\n    onChange,\n    makeDefault,\n    ...rest\n  } = props;\n  const invalidate = useThree(state => state.invalidate);\n  const camera = useThree(state => state.camera);\n  const gl = useThree(state => state.gl);\n  const events = useThree(state => state.events);\n  const get = useThree(state => state.get);\n  const set = useThree(state => state.set);\n  const explDomElement = domElement || events.connected || gl.domElement;\n  const controls = React.useMemo(() => new FlyControls$1(camera), [camera]);\n  React.useEffect(() => {\n    controls.connect(explDomElement);\n    return () => void controls.dispose();\n  }, [explDomElement, controls, invalidate]);\n  React.useEffect(() => {\n    const callback = e => {\n      invalidate();\n      if (onChange) onChange(e);\n    };\n    controls.addEventListener == null || controls.addEventListener('change', callback);\n    return () => controls.removeEventListener == null ? void 0 : controls.removeEventListener('change', callback);\n  }, [onChange, invalidate]);\n  React.useEffect(() => {\n    if (makeDefault) {\n      const old = get().controls;\n      // @ts-ignore https://github.com/three-types/three-ts-types/pull/1398\n      set({\n        controls\n      });\n      return () => set({\n        controls: old\n      });\n    }\n  }, [makeDefault, controls]);\n  useFrame((_, delta) => controls.update(delta));\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    ref: fref,\n    object: controls,\n    args: [camera, explDomElement]\n  }, rest));\n});\nexport { FlyControls };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}