{"ast":null,"code":"/*\nThis file is part of web3.js.\n\nweb3.js is free software: you can redistribute it and/or modify\nit under the terms of the GNU Lesser General Public License as published by\nthe Free Software Foundation, either version 3 of the License, or\n(at your option) any later version.\n\nweb3.js is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU Lesser General Public License for more details.\n\nYou should have received a copy of the GNU Lesser General Public License\nalong with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n// eslint-disable-next-line max-classes-per-file\nimport { Web3Context, isSupportedProvider } from 'web3-core';\nimport { Web3Eth, registeredSubscriptions } from 'web3-eth';\nimport Contract from 'web3-eth-contract';\nimport { ENS, registryAddresses } from 'web3-eth-ens';\nimport { Iban } from 'web3-eth-iban';\nimport { Personal } from 'web3-eth-personal';\nimport { Net } from 'web3-net';\nimport * as utils from 'web3-utils';\nimport { isNullish, isDataFormat, isContractInitOptions } from 'web3-utils';\nimport { mainnet } from 'web3-rpc-providers';\nimport { InvalidMethodParamsError } from 'web3-errors';\nimport abi from './abi.js';\nimport { initAccountsForContext } from './accounts.js';\nimport { Web3PkgInfo } from './version.js';\nimport { onNewProviderDiscovered, requestEIP6963Providers } from './web3_eip6963.js';\nexport class Web3 extends Web3Context {\n  constructor(providerOrContext = mainnet) {\n    var _a;\n    if (isNullish(providerOrContext) || typeof providerOrContext === 'string' && providerOrContext.trim() === '' || typeof providerOrContext !== 'string' && !isSupportedProvider(providerOrContext) && !providerOrContext.provider) {\n      console.warn('NOTE: web3.js is running without provider. You need to pass a provider in order to interact with the network!');\n    }\n    let contextInitOptions = {};\n    if (typeof providerOrContext === 'string' || isSupportedProvider(providerOrContext)) {\n      contextInitOptions.provider = providerOrContext;\n    } else if (providerOrContext) {\n      contextInitOptions = providerOrContext;\n    } else {\n      contextInitOptions = {};\n    }\n    contextInitOptions.registeredSubscriptions = Object.assign(Object.assign({}, registeredSubscriptions), (_a = contextInitOptions.registeredSubscriptions) !== null && _a !== void 0 ? _a : {});\n    super(contextInitOptions);\n    const accounts = initAccountsForContext(this);\n    // Init protected properties\n    this._wallet = accounts.wallet;\n    this._accountProvider = accounts;\n    this.utils = utils;\n    // Have to use local alias to initiate contract context\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const self = this;\n    class ContractBuilder extends Contract {\n      constructor(jsonInterface, addressOrOptionsOrContext, optionsOrContextOrReturnFormat, contextOrReturnFormat, returnFormat) {\n        if (isContractInitOptions(addressOrOptionsOrContext) && isContractInitOptions(optionsOrContextOrReturnFormat)) {\n          throw new InvalidMethodParamsError('Should not provide options at both 2nd and 3rd parameters');\n        }\n        let address;\n        let options = {};\n        let context;\n        let dataFormat;\n        // add validation so its not a breaking change\n        if (!isNullish(addressOrOptionsOrContext) && typeof addressOrOptionsOrContext !== 'object' && typeof addressOrOptionsOrContext !== 'string') {\n          throw new InvalidMethodParamsError();\n        }\n        if (typeof addressOrOptionsOrContext === 'string') {\n          address = addressOrOptionsOrContext;\n        }\n        if (isContractInitOptions(addressOrOptionsOrContext)) {\n          options = addressOrOptionsOrContext;\n        } else if (isContractInitOptions(optionsOrContextOrReturnFormat)) {\n          options = optionsOrContextOrReturnFormat;\n        } else {\n          options = {};\n        }\n        if (addressOrOptionsOrContext instanceof Web3Context) {\n          context = addressOrOptionsOrContext;\n        } else if (optionsOrContextOrReturnFormat instanceof Web3Context) {\n          context = optionsOrContextOrReturnFormat;\n        } else if (contextOrReturnFormat instanceof Web3Context) {\n          context = contextOrReturnFormat;\n        } else {\n          context = self.getContextObject();\n        }\n        if (returnFormat) {\n          dataFormat = returnFormat;\n        } else if (isDataFormat(optionsOrContextOrReturnFormat)) {\n          dataFormat = optionsOrContextOrReturnFormat;\n        } else if (isDataFormat(contextOrReturnFormat)) {\n          dataFormat = contextOrReturnFormat;\n        }\n        super(jsonInterface, address, options, context, dataFormat);\n        super.subscribeToContextEvents(self);\n        // eslint-disable-next-line no-use-before-define\n        if (!isNullish(eth)) {\n          // eslint-disable-next-line no-use-before-define\n          const TxMiddleware = eth.getTransactionMiddleware();\n          if (!isNullish(TxMiddleware)) {\n            super.setTransactionMiddleware(TxMiddleware);\n          }\n        }\n      }\n    }\n    const eth = self.use(Web3Eth);\n    // Eth Module\n    this.eth = Object.assign(eth, {\n      // ENS module\n      ens: self.use(ENS, registryAddresses.main),\n      // registry address defaults to main network\n      // Iban helpers\n      Iban,\n      net: self.use(Net),\n      personal: self.use(Personal),\n      // Contract helper and module\n      Contract: ContractBuilder,\n      // ABI Helpers\n      abi,\n      // Accounts helper\n      accounts\n    });\n  }\n}\nWeb3.version = Web3PkgInfo.version;\nWeb3.utils = utils;\nWeb3.requestEIP6963Providers = requestEIP6963Providers;\nWeb3.onNewProviderDiscovered = onNewProviderDiscovered;\nWeb3.modules = {\n  Web3Eth,\n  Iban,\n  Net,\n  ENS,\n  Personal\n};\nexport default Web3;\n//# sourceMappingURL=web3.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}